knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(dplyr)
library(cowplot)
library(ggplot2)
library(readr)
database <- read_csv("msft_us_historical_data.csv")
database %>%
ggplot()+
geom_line(aes(x = Date, y = Close))
database %>%
ggplot()+
geom_line(aes(x = Date, y = Close)) +
theme_light(base_size = 18)
database %>%
ggplot()+
geom_line(aes(x = Date, y = Close)) +
theme_light(base_size = 18) +
labs( title= "Microsoft - notowania na giełdzie", y = "Cena zamknięcia", x = "Data")
database %>%
ggplot()+
geom_line(aes(x = Date, y = Close)) +
theme_light(base_size = 15) +
labs( title= "Microsoft - notowania na giełdzie", y = "Cena zamknięcia", x = "Data")
split_date <- quantile(database$Date, 0.8)
split_index <- floor(0.8 * nrow(database))
split_date <- database$Date[split_index]
database %>%
ggplot()+
geom_line(aes(x = Date, y = Close)) +
geom_vline(xintercept = as.numeric(split_date), color = "red", linetype = "dashed", size = 1) +
theme_light(base_size = 15) +
labs( title= "Microsoft - notowania na giełdzie", y = "Cena zamknięcia", x = "Data")
split_index <- floor(0.8 * nrow(database))
split_date <- database$Date[split_index]
database %>%
ggplot()+
geom_line(aes(x = Date, y = Close)) +
geom_vline(xintercept = as.numeric(split_date), color = "red", linetype = "dashed", size = 1) +
annotate(
"rect", xmin = as.numeric(split_date), xmax = max(database$Date), ymin = 0, ymax = 400,
fill = "red", alpha = 0.2
) +
theme_light(base_size = 15) +
labs( title= "Microsoft - notowania na giełdzie", y = "Cena zamknięcia", x = "Data")
# Obliczanie 80% danych
split_index <- floor(0.8 * nrow(database))
split_date <- database$Date[split_index]
# Konwersja dat na liczby (dni od początkowej daty)
database$Date_num <- as.numeric(database$Date)
split_date_num <- as.numeric(split_date)
max_date_num <- as.numeric(max(database$Date))
# Tworzymy wykres z linią pionową i prostokątem
database %>%
ggplot() +
geom_line(aes(x = Date_num, y = Close)) +
geom_vline(xintercept = split_date_num, color = "red", linetype = "dashed", size = 1) +
annotate(
"rect", xmin = split_date_num, xmax = max_date_num, ymin = 0, ymax = 400,
fill = "red", alpha = 0.2
) +
scale_x_continuous(labels = scales::date_format("%Y-%m-%d"), breaks = scales::date_breaks("1 year"), limits = c(min(database$Date_num), max_date_num)) +
theme_light(base_size = 15) +
labs(title = "Microsoft - notowania na giełdzie", y = "Cena zamknięcia", x = "Data")
split_index <- floor(0.8 * nrow(database))
split_date <- database$Date[split_index]
database %>%
ggplot()+
geom_line(aes(x = Date, y = Close)) +
geom_vline(xintercept = as.numeric(split_date), color = "red", linetype = "dashed", size = 1) +
theme_light(base_size = 15) +
labs( title= "Microsoft - notowania na giełdzie", y = "Cena zamknięcia", x = "Data")
